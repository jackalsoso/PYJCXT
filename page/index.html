<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="./js/echarts-en.common.min.js"></script>
  <script src="./js/echarts-en.js"></script>
  <script type="text/javascript" src="./js/vue.min.js"></script>
  <script type="text/javascript" src="./js/axios.min.js"></script>
  <link href="./css/reset.css" rel="stylesheet">
  <link id="cssthemes" href="" rel="stylesheet">
  <title>浦仪公路西段上坝夹江大桥健康监测系统</title>
  <script src="TemplateData/UnityProgress.js"></script>
  <script src="Build/UnityLoader.js"></script>
</head>

<body>
  <div class="page-controller" id="appall">
    <div class="page-header">
      <div class="logo">浦仪公路西段上坝夹江大桥健康监测系统</div>
      <div class="user">
        <div class="datetimer">2020年05月11日 周一 19 : 46</div>
        <div class="themes-picker">
          <img src="./images/icon_themes.png" />
          <ul>
            <li class="white" data-theme="normal"><img src="./images/icon_white.png" /></li>
            <li class="blue active" data-theme="dark"><img src="./images/icon_blue.png" /></li>
          </ul>
        </div>
        <div class="userinfo" @mouseenter="" @mouseleave=""><img src="./images/portrait.jpg"
            border="0" /><span>管理员</span></div>
      </div>
    </div>
    <div class="page-nav">
      <!-- <div class="themes-picker" data-theme="">
        <div class="dot"></div>
        <div class="label"></div>
      </div> -->
      <ul>
        <li class="active" data-menu="index">首页</li><!-- 首页 -->
        <li><span>时程数据</span>
          <ul>
            <li data-menu="time1"><span>测点时程</span></li>
            <li data-menu="time3"><span>交通荷载</span></li>
          </ul>
        </li><!-- 时程数据 -->
        <li><span>统计数据</span>
          <ul>
            <li data-menu="statistics1"><span>测点时程统计</span></li>
            <li data-menu="statistics13"><span>交通荷载统计</span></li>
          </ul>
        </li><!-- 统计数据 -->
        <li><span>结构<br>状态分析</span>
          <ul>
            <li data-menu="structural1"><span>结构动力特性分析</span></li>
            <li data-menu="structural2"><span>应力五度指标</span></li>
            <li data-menu="structural3"><span>结构变形响应分析</span></li>
            <li data-menu="structural4"><span>正交异性板疲劳分析</span></li>
            <li data-menu="structural5"><span>拉索索力时频域分析</span></li>
            <li data-menu="structural6"><span>结构相关性分析</span></li>
            <li data-menu="structural7"><span>阻尼器/梁端纵向累积行程分析</span></li>
            <li data-menu="structural8"><span>行人舒适度评价</span></li>
          </ul>
        </li><!-- 结构状态分析 -->
        <li><span>服役<br>环境分析</span>
          <ul>
            <li data-menu="scenario1"><span>实际车载效应分析</span></li>
            <li data-menu="scenario2"><span>风荷载分析</span></li>
            <li data-menu="scenario3"><span>温度场分析</span></li>
          </ul>
        </li><!-- 服役环境分析 -->
        <li><span>预警管理</span>
          <ul>
            <li data-menu="warning1"><span>结构状态预警</span></li>
            <li data-menu="warning2"><span>服役环境预警</span></li>
          </ul>
        </li><!-- 预警管理 -->
        <li data-menu="system3"><span>报表管理</span>
          <ul>
            <!-- <li data-menu="system1"><span>角色管理</span></li> -->
            <!-- <li data-menu="system2"><span>监测设备管理</span></li> -->
            <!-- <li data-menu="system3"><span>资料备份</span></li> -->
          </ul>
        </li><!-- 报表管理 -->
        <li><span>系统管理</span>
          <ul>
            <li data-menu="system1"><span>角色管理</span></li>
            <li data-menu="system2"><span>监测设备管理</span></li>
            <!-- <li data-menu="system3"><span>资料备份</span></li> -->
          </ul>
        </li><!-- 系统管理 -->
      </ul>
    </div>
    <div class="page-body">
      <div class="page-box left">
        <div class="title">
          <span>桥梁基本信息</span>
        </div>
        <div class="content">
          <div class="info">
            <ul>
              <li><span>桥梁名称：</span> <span>浦仪公路西段上坝夹江大桥</span> <a href="javascript:;">（切换）</a></li>
              <li><span>桥&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型：</span> <span>双塔双索面钢箱梁斜拉桥</span></li>
              <li><span>跨径组合：</span> <span>50+180+500+180+50m</span></li>
              <li><span>地区路线：</span> <span>南京104国道</span></li>
              <li><span>中心桩号：</span> <span>左幅LK7+919.901;右幅AK7+019.901</span></li>
              <li><span>通车时间：</span> <span>2020年</span></li>
              <li><span>设计荷载：</span> <span>公路-I级</span></li>
            </ul>
          </div>
          <div class="imgbox"><img src="./images/simple1.jpg" border="0" /></div>
          <div class="imgbox"><img src="./images/simple2.jpg" border="0" /></div>
        </div>
      </div>
      <div class="page-box right">
        <!-- <div class="title">
          <span>BIM模型</span>
        </div> -->
        <!-- <span class="title-right">
          <img src="./images/explain.png" border="0" />&nbsp;&nbsp;说明
          <div class="title-right-tip">
            说明：当前监测的结构参数的设计能力使用程度，当某测点安全度指为100时，表示该测点当前的应力状态达到了按设计要求（规范加载）计算出的最大应力值。
          </div>
        </span> -->
        <div class="content" style="height:100%">
          <div class="check-box" style="width:93%">
            <p><input class="checkAll" data-action="all" type="checkbox" value="" name="category" checked /> 全选</p>
            <p><input class="check" type="checkbox" value="应力" name="category" checked style="display: none;" /><img
                src="./images/ckicon1.png" class="checkImg" name='1' /> 应力</p>
            <p><input class="check" type="checkbox" value="挠度" name="category" checked style="display: none;" /><img
                src="./images/ckicon2.png" class="checkImg" name='2' /> 挠度</p>
            <p><input class="check" type="checkbox" value="空间变位" name="category" checked style="display: none;" /><img
                src="./images/ckicon3.png" class="checkImg" name='3' /> 空间变位</p>
            <p><input class="check" type="checkbox" value="拉索振动" name="category" checked style="display: none;" /><img
                src="./images/ckicon4.png" class="checkImg" name='4' /> 拉索振动</p>
            <p><input class="check" type="checkbox" value="梁端位移" name="category" checked style="display: none;" /><img
                src="./images/ckicon5.png" class="checkImg" name='5' /> 梁端位移</p>
            <p><input class="check" type="checkbox" value="阻尼器位移" name="category" checked style="display: none;" /><img
                src="./images/ckicon6.png" class="checkImg" name='6' /> 阻尼器位移</p>
            <p><input class="check" type="checkbox" value="横向支座位移" name="category" checked style="display: none;" /><img
                src="./images/ckicon7.png" class="checkImg" name='7' /> 横向支座位移</p>
            <p><input class="check" type="checkbox" value="温度" name="category" checked style="display: none;" /><img
                src="./images/ckicon8.png" class="checkImg" name='8' /> 温度</p>
            <p><input class="check" type="checkbox" value="温湿度" name="category" checked style="display: none;" /><img
                src="./images/ckicon9.png" class="checkImg" name='9' /> 温湿度</p>
            <p><input class="check" type="checkbox" value="风速" name="category" checked style="display: none;" /><img
                src="./images/ckicon10.png" class="checkImg" name='10' /> 风速</p>
            <p><input class="check" type="checkbox" value="动力特性" name="category" checked style="display: none;" /><img
                src="./images/ckicon11.png" class="checkImg" name='11' /> 动力特性</p>
            <p><input class="check" type="checkbox" value="地震、船撞" name="category" checked style="display: none;" /><img
                src="./images/ckicon12.png" class="checkImg" name='12' /> 地震、船撞</p>


          </div>
          <div class="tip-box">
            <!-- <div class="tip-item" @click="changecolor"><i class="green" v-if="greentrue"></i><i class="grey"
                v-if="!greentrue"></i>正常</div> -->
            <div class="tip-item" @click="changecolor2"><i class="red" v-if="redtrue"></i><i class="grey"
                v-if="!redtrue"></i>未处理预警测点</div>
            <div class="tip-item" @click="changecolor3"><i class="white" v-if="whitetrue"></i><i class="grey"
                v-if="!whitetrue"></i>数据异常测点
            </div>
            <!-- @click="changecolor" @click="changecolor2"
@click="changecolor3" -->
            <span class="title-right title-Info" style="position: absolute !important;
            right: -63px;top:0;">
              <img src="./images/explain.png" border="0" />&nbsp;&nbsp;<p style="color: white;">说明
                <p />
              <div class="title-right-tip" style="width: 300px;
              padding: 10px;
              line-height: 22px;
              position: absolute;
              top: -50px;
              right: 0;">
                说明：鼠标左键旋转，右键平移
              </div>
            </span>
          </div>

          <div class="tip-check">
            <div class="box">
              <label class="custom-checkbox">
                <input id="xuhuacheck" type="checkbox">
                <!-- <input  type="checkbox" onclick="if(this.checked){ alert('选中协议,允许bai注册!duzhi');}else{alert('请选择同意协dao议后注册!');}"> -->
                <span></span>

              </label>
              <div class="custom-txt">虚化</div>
            </div>
            <div class="box">
              <label class="custom-checkbox">
                <input id="huanjincheck" type="checkbox" checked>
                <span></span>

              </label>
              <div class="custom-txt">环境</div>
            </div>
          </div>
          <div class="unity-popup"><img src="./images/popupindex.png" /></div>
          <div id="unity" style="width: 100%;height: 100%;"></div>
        </div>
      </div>
      <div class="page-box bottom">
        <ul>
          <li>
            <div class="title">
              <span>综合评分</span>
            </div>
            <div class="content">
              <div class="chart" id="chart1"></div>
            </div>
          </li>
          <li>
            <div class="title">
              <span>设备在线率</span>
            </div>
            <div class="content">
              <div class="chart" id="chart2"></div>
            </div>
          </li>
          <li>
            <div class="title">
              <span>预警统计</span>
            </div>
            <div class="content">
              <div class="chart" id="chart3"></div>
            </div>
          </li>
          <li>
            <div class="title">
              <span>气象信息</span>
            </div>
            <div class="content content4">
              <div class="location">
                <span class="city">南京</span>
                <span class="update-time">更新于2020-08-10 19:32:44</span>
              </div>
              <div class="base-info">
                <span class="base-info-left">28℃</span>
                <div class="base-info-center">
                  <span>晴</span><br />
                  <span>空气质量</span>
                </div>
                <span class="base-info-right">26 优</span>
              </div>
              <div class="content4-types">
                <div class="content4-type">
                  <span>温度</span><br />
                  <span>22~32℃</span>
                </div>
                <div class="content4-type">
                  <span>湿度</span><br />
                  <span>57%</span>
                </div>
                <div class="content4-type">
                  <span>风速</span><br />
                  <span>西·3米/秒</span>
                </div>
              </div>
              <div class="broadcast">
                <img src="./images/bugle.png" border="0" />
                <span>未来2小时内有台风</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script src="./js/jquery.min.js"></script>
  <script src="./js/common.js"></script>
  <script type="text/javascript" src="./js/mock.js"></script>
  <script type="text/javascript">

    var unity
    var unityReady = false

    //测点加载完成
    function OnPointLoaded() {

    }
    //断面加载完成
    function OnCrossSectionLoaded() {

    }
    var isshow = false
    $(".unity-popup").hide();
    //选择测点
    function SelectMonitorPoint(type, name) {
      console.log(type)
      console.log(name)
      if (isshow == false) {
        // $(".unity-popup").show();
        // isshow = true
      } else {
        // $(".unity-popup").hide();
        // isshow = false
      }



    }

    function OnSceneLoaded() {
      // unity.SendMessage("Manager", "CallBackWGL_StartScene", '0')
      unity.SendMessage("GameManager", "CallBackWGL_LoadMeasurePoint", "")//加载测点
      unity.SendMessage("GameManager", "SetIsFlicker", "true")//测点闪烁

    }
    function LoadComponentColor() {
      unity.SendMessage("Manager", "CallBackWGL_LoadComponentColor", JSON.stringify(components))
      unityReady = true
    }
    function SelectComponent(compName) {
      app.changeComponentFromUnity(compName)
    }
    function SetShowState(show) {
      app.showState = show == 'true' ? true : false
    }
    //Unity点击构件返回事件
    function SelectStructs(monitor, measurePoint) {
      app.changeStructs(measurePoint, true)
    }





    let init = function () {
      var value = 80; // 数值
      var _x = document.getElementById('chart1').offsetWidth; // 宽度
      var _y = document.getElementById('chart1').offsetHeight; // 高度
      var x0 = _x / 2,
        y0 = _y / 2; // 圆心坐标点
      var r = _x > _y ? _y * 0.3 - 8 : _x * 0.3 - 8; // 半径
      var deg = value / 100 * 270 - 225; // 角度

      var option1 = {
        series: {
          name: '综合评分',
          type: 'gauge',
          max: 100,
          radius: '60%',
          detail: {
            formatter: function (value) {
              return `{a|}\n{b|${value}}\n{c|综合评分}`
            },
            offsetCenter: [0, 0],
            rich: {
              a: {
                backgroundColor: {
                  image: './images/score.png'
                },
                width: 40,
                height: 22
              },
              b: {
                fontSize: 36,
                color: '#fff',
                padding: [8, 0, 12, 0]
              },
              c: {
                fontSize: 14,
                color: '#8D8C98'
              }
            }
          },
          data: [{
            value: value
          }],
          axisLine: {
            lineStyle: {
              width: 16,
              color: [
                [1, new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                  offset: 0.15,
                  color: "#FF6383"
                },
                {
                  offset: 0.50,
                  color: "#C95FF2"
                },
                {
                  offset: 0.85,
                  color: "#7C6AF2"
                },
                {
                  offset: 1,
                  color: "#5C89FF"
                }
                ])]
              ]
            }
          },
          splitLine: {
            show: false
          },
          axisLabel: {
            distance: -20,
            show: true,
            formatter: function (value) {
              if (value === 0) {
                return '{a|严重}'
              } else if (value === 100) {
                return '{b|良好}'
              }
              return ''
            },
            rich: {
              a: {
                fontSize: 14,
                color: '#FF6383',
                padding: [-50, 0, 0, -10]
              },
              b: {
                fontSize: 14,
                color: '#6085FD',
                padding: [-50, -10, 0, 0]
              }
            }
          },
          pointer: {
            show: false
          },
          axisTick: {
            show: false
          }
        },
        graphic: [{
          type: 'circle',
          shape: {
            r: 10,
            cx: x0 + r * Math.cos(deg * Math.PI / 180),
            cy: y0 + r * Math.sin(deg * Math.PI / 180)
          },
          style: {
            fill: '#fff'
          },
          z: 10
        }]
      }
      var option2 = {
        series: {
          name: '设备在线率',
          type: 'pie',
          radius: ['50%', '60%'],
          itemStyle: {
            normal: {
              color: '#5C89FF',
              label: {
                show: false
              },
              labelLine: {
                show: false
              }
            }
          },
          hoverAnimation: false,
          data: [{
            value: 86,
            label: {
              normal: {
                formatter: function (params) {
                  return `{a|${params.value}%}\n{b|${params.seriesName}}`
                },
                rich: {
                  a: {
                    fontSize: 36,
                    color: '#fff',
                    lineHeight: 50
                  },
                  b: {
                    fontSize: 14,
                    color: '#8D8C98',
                  }
                },
                position: 'center',
                show: true
              }
            },
          }, {
            value: 100 - 86,
            itemStyle: {
              normal: {
                color: '#364C94'
              },
              emphasis: {
                color: '#364C94'
              }
            }
          }]
        }
      }
      var option3 = {
        color: ['#FF5973', '#FF9F40', '#FFCB48'],
        tooltip: {
          trigger: 'item',
          formatter: '{a} <br/>{b}: {c} ({d}%)'
        },
        legend: {
          bottom: 20,
          itemGap: 20,
          textStyle: {
            color: '#fff'
          },
          data: ['红色预警', '橙色预警', '黄色预警']
        },
        series: [{
          name: '预警统计',
          type: 'pie',
          radius: ['40%', '60%'],
          center: ['50%', '43%'],
          avoidLabelOverlap: false,
          label: {
            show: false,
            position: 'center'
          },
          emphasis: {
            label: {
              show: true,
              fontSize: 22,
              fontWeight: 'bold'
            }
          },
          labelLine: {
            show: false
          },
          data: [{
            value: 335,
            name: '红色预警'
          },
          {
            value: 310,
            name: '橙色预警'
          },
          {
            value: 234,
            name: '黄色预警'
          }
          ]
        }]
      };


      var option1n = {
        series: {
          name: '综合评分',
          type: 'gauge',
          max: 100,
          radius: '60%',
          detail: {
            formatter: function (value) {
              return `{a|}\n{b|${value}}\n{c|综合评分}`
            },
            offsetCenter: [0, 0],
            rich: {
              a: {
                backgroundColor: {
                  image: './images/score.png'
                },
                width: 40,
                height: 22
              },
              b: {
                fontSize: 36,
                color: '#000',
                padding: 10
              },
              c: {
                fontSize: 14,
                color: '#8D8C98'
              }
            }
          },
          data: [{
            value: value
          }],
          axisLine: {
            lineStyle: {
              width: 16,
              color: [
                [1, new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                  offset: 0.15,
                  color: "#FF6383"
                },
                {
                  offset: 0.50,
                  color: "#C95FF2"
                },
                {
                  offset: 0.85,
                  color: "#7C6AF2"
                },
                {
                  offset: 1,
                  color: "#5C89FF"
                }
                ])]
              ]
            }
          },
          splitLine: {
            show: false
          },
          axisLabel: {
            distance: -20,
            show: true,
            formatter: function (value) {
              if (value === 0) {
                return '{a|严重}'
              } else if (value === 100) {
                return '{b|良好}'
              }
              return ''
            },
            rich: {
              a: {
                fontSize: 14,
                color: '#FF6383',
                padding: [-50, 0, 0, -10]
              },
              b: {
                fontSize: 14,
                color: '#6085FD',
                padding: [-50, -10, 0, 0]
              }
            }
          },
          pointer: {
            show: false
          },
          axisTick: {
            show: false
          }
        },
        graphic: [{
          type: 'circle',
          shape: {
            r: 10,
            cx: x0 + r * Math.cos(deg * Math.PI / 180),
            cy: y0 + r * Math.sin(deg * Math.PI / 180)
          },
          style: {
            fill: '#fff'
          },
          z: 10
        }]
      }
      var option2n = {
        series: {
          name: '设备在线率',
          type: 'pie',
          radius: ['50%', '60%'],
          itemStyle: {
            normal: {
              color: '#5C89FF',
              label: {
                show: false
              },
              labelLine: {
                show: false
              }
            }
          },
          hoverAnimation: false,
          data: [{
            value: 86,
            label: {
              normal: {
                formatter: function (params) {
                  return `{a|${params.value}%}\n{b|${params.seriesName}}`
                },
                rich: {
                  a: {
                    fontSize: 36,
                    color: '#000',
                    lineHeight: 50
                  },
                  b: {
                    fontSize: 14,
                    color: '#8D8C98',
                  }
                },
                position: 'center',
                show: true
              }
            },
          }, {
            value: 100 - 86,
            itemStyle: {
              normal: {
                color: '#364C94'
              },
              emphasis: {
                color: '#364C94'
              }
            }
          }]
        }
      }
      var option3n = {
        color: ['#FF5973', '#FF9F40', '#FFCB48'],
        tooltip: {
          trigger: 'item',
          formatter: '{a} <br/>{b}: {c} ({d}%)'
        },
        legend: {
          bottom: 20,
          itemGap: 20,
          textStyle: {
            color: '#000'
          },
          data: ['红色预警', '橙色预警', '黄色预警']
        },
        series: [{
          name: '预警统计',
          type: 'pie',
          radius: ['40%', '60%'],
          center: ['50%', '43%'],
          avoidLabelOverlap: false,
          label: {
            show: false,
            position: 'center'
          },
          emphasis: {
            label: {
              show: true,
              fontSize: 22,
              fontWeight: 'bold'
            }
          },
          labelLine: {
            show: false
          },
          data: [{
            value: 335,
            name: '红色预警'
          },
          {
            value: 310,
            name: '橙色预警'
          },
          {
            value: 234,
            name: '黄色预警'
          }
          ]
        }]
      };


      // 初始化echarts实例
      var myChart1 = echarts.init(document.getElementById('chart1'), 'light');
      var myChart2 = echarts.init(document.getElementById('chart2'), 'light');
      var myChart3 = echarts.init(document.getElementById('chart3'), 'light');

      if (sessionStorage.theme == 'dark') {
        myChart1.setOption(option1, true);
        myChart2.setOption(option2, true);
        myChart3.setOption(option3, true);
      } else {
        myChart1.setOption(option1n, true);
        myChart2.setOption(option2n, true);
        myChart3.setOption(option3n, true);
      }
    }
    //所有检测项和测点   mock
    // Mock.mock(
    //   'GET /monitor-service/items/bridgeId/:5f45d7f634f70b68fbeba992', {
    //   "data": [{
    //     "id": "5f5641d7b5185269993253cd",
    //     "version": 1599636245976,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "STRESS",
    //     "monitorItemTypeName": "应力",
    //     "measuringPoints": ["WS-01-FF-03"]
    //   }, {
    //     "id": "5f572a8534442f45ca55ccf4",
    //     "version": 1599548037571,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "TEMPERATURE",
    //     "monitorItemTypeName": "温度",
    //     "measuringPoints": ["FS-01-FF-01", "WS-01-FF-01", "WS-01-FF-02", "WS-01-FF-03"]
    //   }, {
    //     "id": "5f50b61581d2f4799b4f2195",
    //     "version": 1599188403354,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "HUMITURE",
    //     "monitorItemTypeName": "温湿度",
    //     "measuringPoints": ["WS-01-FF-01", "WS-01-FF-02", "WS-01-FF-03"]
    //   }, {
    //     "id": "5f5225e4fe202537efba2400",
    //     "version": 1599219172850,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "WIND",
    //     "monitorItemTypeName": "风速风向",
    //     "measuringPoints": ["FS-01-FF-01"]
    //   }, {
    //     "id": "5f57486634442f45ca55ccf6",
    //     "version": 1599555686942,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "SPACE_DEFLECTION",
    //     "monitorItemTypeName": "空间变位",
    //     "measuringPoints": ["FS-01-FF-01", "WS-01-FF-01", "WS-01-FF-02", "WS-01-FF-03"]
    //   }, {
    //     "id": "5f572aff34442f45ca55ccf5",
    //     "version": 1599548159693,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "CABLE_FORCE",
    //     "monitorItemTypeName": "索力",
    //     "measuringPoints": ["FS-01-FF-01", "WS-01-FF-01", "WS-01-FF-02", "WS-01-FF-03"]
    //   }, {
    //     "id": "5f50548bdb5b1f7f28400e03",
    //     "version": 1599100043037,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "BEAM_END_OFFSET",
    //     "monitorItemTypeName": "梁端位移"
    //   }, {
    //     "id": "5f505494db5b1f7f28400e05",
    //     "version": 1599100052803,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "DAMPER_OFFSET",
    //     "monitorItemTypeName": "阻尼器位移"
    //   }, {
    //     "id": "5f50548fdb5b1f7f28400e04",
    //     "version": 1599100047863,
    //     "bridgeId": "5f45d7f634f70b68fbeba992",
    //     "monitorItemType": "EARTHQUAKE_SHIP_CRASH",
    //     "monitorItemTypeName": "地震船撞"
    //   }],
    //   "status": 200,
    //   "statusText": "",
    //   "headers": {
    //     "content-type": "application/json;charset=UTF-8"
    //   },
    //   "config": {
    //     "transformRequest": {},
    //     "transformResponse": {},
    //     "timeout": 0,
    //     "xsrfCookieName": "XSRF-TOKEN",
    //     "xsrfHeaderName": "X-XSRF-TOKEN",
    //     "maxContentLength": -1,
    //     "headers": {
    //       "Accept": "application/json, text/plain, */*"
    //     },
    //     "method": "get",
    //     "url": "http://192.168.137.1/monitor-service/items",
    //     "params": {
    //       "bridgeId": "5f45d7f634f70b68fbeba992"
    //     }
    //   },
    //   "request": {}
    // }

    // );
    // 初始化vue
    var appshili = new Vue({
      el: '#appall',
      data: {
        select1name: "",
        greentrue: true,
        redtrue: true,
        whitetrue: true,
      },
      mounted() {
        //页面加载完成后调用
        unity = UnityLoader.instantiate("unity", "Build/pydq.json", { onProgress: UnityProgress });
        this.getcedian()
      },
      methods: {
        changecolor() {
          var str = "";
          this.greentrue = !this.greentrue
          if (this.greentrue == true) {
            str += "正常";
          }
          if (this.redtrue == true) {
            if (str == "") {
              str += "预警";
            }
            else {
              str += ",预警";
            }
          }
          if (this.whitetrue == true) {
            if (str == "") {
              str += "无数据";
            }
            else {
              str += ",无数据";
            }
          }
          console.log(str)
          unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByState", str)

        },
        changecolor2() {
          var str = "";
          this.redtrue = !this.redtrue
          if (this.greentrue == true) {
            str += "正常";
          }
          if (this.redtrue == true) {
            if (str == "") {
              str += "预警";
            }
            else {
              str += ",预警";
            }
          }
          if (this.whitetrue == true) {
            if (str == "") {
              str += "无数据";
            }
            else {
              str += ",无数据";
            }
          }
          console.log(str)
          unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByState", str)
        },
        changecolor3() {
          var str = "";
          this.whitetrue = !this.whitetrue
          if (this.greentrue == true) {
            str += "正常";
          }
          if (this.redtrue == true) {
            if (str == "") {
              str += "预警";
            }
            else {
              str += ",预警";
            }
          }
          if (this.whitetrue == true) {
            if (str == "") {
              str += "无数据";
            }
            else {
              str += ",无数据";
            }
          }
          console.log(str)
          unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByState", str)
        },
        getcedian() {
          let thiz = this;
          axios({
            method: 'get',
            url: "GET /monitor-service/items/bridgeId/:5f45d7f634f70b68fbeba992",
            // params: { bridgeId: "5f45d7f634f70b68fbeba992" }
          })
            .then(function (res) {
              console.log(res)
              if (res.status == 200) {
                console.log(res.data)
                //所有检测项和测点
              }

            })
            .catch(err => {

            });
        },

      }
    })


    // var colorcss = true
    // $(".green").on('click', function () {
    //   if(colorcss == true){

    //   }
    //   $(".green").css("background","#575757")
    // })
    $('#xuhuacheck').on("click", function () {
      if (this.checked == true) {
        unity.SendMessage("GameManager", "SetBridgeTransparent", "false")
      } else {
        unity.SendMessage("GameManager", "SetBridgeTransparent", "true")
      }
    })
    $('#huanjincheck').on("click", function () {
      if (this.checked == true) {

        unity.SendMessage("GameManager", "SetEnvir", "true")
      } else {

        unity.SendMessage("GameManager", "SetEnvir", "false")
      }
    })
    $('.check-box').on('click', 'input', function () {
      // debugger
      console.log($('.check'))
      //循环遍历改变每张图片的url
      console.log($('.checkImg'))
      for (let i = 0; i < $('.check').length; i++) {
        if ($('.check')[i].checked) {
          $('.checkImg')[i].src = `./images/ckicon${i + 1}.png`
          unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByType", "")
        } else {
          $('.checkImg')[i].src = `./images/ckicon${i + 1}_grey.png`

          unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByType", "应力,挠度,空间变位,拉索振动,梁端位移,阻尼器位移,横向支座位移,温度,温湿度,风速,动力特性,地震、船撞")
        }

      }
      if ($(this).attr('data-action') == 'all') {
        if ($(this).is(':checked')) {

          $('.check-box').find('.check').prop('checked', true)
          for (let i = 0; i < $('.check').length; i++) {
            $('.checkImg')[i].src = `./images/ckicon${i + 1}.png`
          }
        } else {

          $('.check-box').find('.check').prop('checked', false)
          for (let i = 0; i < $('.check').length; i++) {
            $('.checkImg')[i].src = `./images/ckicon${i + 1}_grey.png`
          }
        }
      } else {
        let _seledLen = $('.check-box').find('input[type=checkbox].check:checked').length

        if (_seledLen < 12) {
          $('.checkAll').prop('checked', false)

        } else {
          $('.checkAll').prop('checked', true)

        }
      }
    })
    var checkarr = ["应力", "挠度", "空间变位", "拉索振动", "梁端位移", "阻尼器位移", "横向支座位移", "温度", "温湿度", "风速", "动力特性", "地震、船撞"]
    $('.check-box').on('click', 'img', function (event) {
      // debugger
      console.log(event, event.target.name - 0)


      if ($('.check')[event.target.name - 0 - 1].checked) {
        console.log($('.check')[event.target.name - 0 - 1].value)
        $('.check')[event.target.name - 0 - 1].checked = false
        checkarr[event.target.name - 0 - 1] = ""
        console.log(checkarr)
        unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByType", checkarr.join(","))
        $('.checkImg')[event.target.name - 0 - 1].src = `./images/ckicon${event.target.name - 0}_grey.png`
      } else {
        $('.check')[event.target.name - 0 - 1].checked = true
        checkarr[event.target.name - 0 - 1] = $('.check')[event.target.name - 0 - 1].value
        console.log(checkarr)
        unity.SendMessage("GameManager", "CallBackWGL_ShowMeasurePointByType", checkarr.join(","))
        $('.checkImg')[event.target.name - 0 - 1].src = `./images/ckicon${event.target.name - 0}.png`
      }
      let _seledLen = $('.check-box').find('input[type=checkbox].check:checked').length

      if (_seledLen < 12) {
        $('.checkAll').prop('checked', false)

      } else {
        $('.checkAll').prop('checked', true)

      }
    })

  </script>
</body>

</html>