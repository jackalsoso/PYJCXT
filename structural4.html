<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdn.bootcss.com/echarts/4.4.0-rc.1/echarts-en.common.min.js"></script>
  <script src="https://cdn.bootcss.com/echarts/4.4.0-rc.1/echarts-en.js"></script>
  <script type="text/javascript" src="./js/vue.min.js"></script>
  <script type="text/javascript" src="./js/axios.min.js"></script>
  <script type="text/javascript" src="./js/mock.js"></script>
  <link href="./css/reset.css" rel="stylesheet">
  <link id="cssthemes" href="" rel="stylesheet">
  <link rel="stylesheet" type="text/css" media="all" href="./css/daterangepicker.css" />
  <title>浦仪监测系统</title>
</head>
<body>
  <div class="page-controller">
    <div class="page-header">
      <div class="logo">浦仪监测系统</div>
      <div class="user">
        <div class="datetimer">2020年05月11日  周一  19 : 46</div>
        <div class="userinfo"><img src="./images/portrait.jpg" border="0" /><span>管理员</span></div>
      </div>
    </div>
    <div class="page-nav">
      <div class="themes-picker" data-theme="">
        <div class="dot"></div>
        <div class="label"></div>
      </div>
      <ul>
        <li data-menu="index">首页</li><!-- 首页 -->
        <li><span>时程数据</span>
          <ul>
            <li data-menu="time1"><span>测点时程</span></li>
            <li data-menu="time3"><span>交通荷载</span></li>
          </ul>
        </li><!-- 时程数据 -->
        <li><span>统计数据</span>
          <ul>
            <li data-menu="statistics1"><span>测点时程统计</span></li>
            <li data-menu="statistics13"><span>交通荷载统计</span></li>
          </ul>
        </li><!-- 统计数据 -->
        <li class="active"><span>结构<br>状态分析</span>
          <ul>
          <li data-menu="structural1"><span>结构动力特性分析</span></li>
          <li data-menu="structural2"><span>应力五度指标</span></li>
          <li data-menu="structural3"><span>结构变形响应分析</span></li>
          <li data-menu="structural4"><span>正交异性板疲劳分析</span></li>
          <li data-menu="structural5"><span>拉索索力时频域分析</span></li>
          <li data-menu="structural6"><span>结构相关性分析</span></li>
          <li data-menu="structural7"><span>阻尼器/梁端纵向累积行程分析</span></li>
          <li data-menu="structural8"><span>行人舒适度评价</span></li>
          </ul>
        </li><!-- 结构状态分析 -->
        <li><span>服役<br>环境分析</span>
          <ul>
            <li data-menu="scenario1"><span>实际车载效应分析</span></li>
            <li data-menu="scenario2"><span>风荷载分析</span></li>
            <li data-menu="scenario3"><span>温度场分析</span></li>
          </ul>
        </li><!-- 服役环境分析 -->
        <li><span>预警管理</span>
          <ul>
            <li data-menu="warning1"><span>结构状态预警</span></li>
            <li data-menu="warning2"><span>服役环境预警</span></li>
          </ul>
        </li><!-- 预警管理 -->
        <li><span>系统管理</span>
          <ul>
            <li data-menu="system1"><span>角色管理</span></li>
            <li data-menu="system2"><span>监测设备管理</span></li>
            <li data-menu="system3"><span>资料备份</span></li>
          </ul>
        </li><!-- 系统管理 -->
      </ul>
    </div>
    <div class="page-body">
      <div class="page-box time-top statistics-top structural4-top">
        <div class="title">
          <span>IBM模型</span>
        </div>
        <div class="content">
          <ul style="width: 150px;">
            <li class="active" data-menu="structural4">实测车流下疲劳分析</li>
            <li data-menu="structural4">动应变监测<br/>数据下疲劳分析</li>
          </ul>
          <div class="imgbox"><img src="./images/simple3.jpg" border="0" /></div>
        </div>
      </div>
      <div class="time-bottom statistics-bottom">
        <div class="page-box">
          <div class="title">
            <span>疲劳损伤程度/疲劳循环次数</span>
            <span class="title-right">
              <img src="./images/explain.png" border="0" />&nbsp;&nbsp;说明
              <div class="title-right-tip">
                备注：疲劳损伤程度为1时结构产生疲劳破坏；将变幅疲劳换算成常幅疲劳，疲劳循环次数为换算常幅应力下的循环次数，但循环次数达到200万次时，结构疲劳破坏。
              </div>
            </span>
          </div>
          <div class="content">
            <div class="header">
              <ul class="header-left">
                <li class="active">小时</li>
                <li>日</li>
              </ul>
              <div class="header-right">
                <div class="checkbox" style="display: flex; align-items: center;">
                  <input type="checkbox" value="考虑残余应力疲劳分析" />&nbsp;考虑残余应力疲劳分析&nbsp;&nbsp;&nbsp;&nbsp;
                </div>
                <select>
                  <option value="疲劳损伤程度" id="option1">疲劳损伤程度</option>
                  <option value="疲劳循环次数" id="option2">疲劳循环次数</option>
                </select>
                <select>
                  <option value="YL-A1-B-01">YL-A1-B-01</option>
                </select>
                <input type="text" id="time-selector1" class="time-selector">
              </div>
            </div>
            <div class="chart-wrap">
              <div class="chart" id="chart1" style="width: 100%;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="./js/jquery.min.js"></script>
  <script src="./js/common.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>
  <script type="text/javascript" src="./js/daterangepicker.js"></script>
  <script type="text/javascript">
    let init = function () {
      var data = [
        ["2020-05-12", 120, 220, 150, 320, 134, 332],
        ["2020-05-13", 132, 182, 232, 334, 90, 290],
        ["2020-05-14", 101, 191, 301, 486, 210, 310],
        ["2020-05-15", 134, 332, 154, 390, 120, 220],
        ["2020-05-16", 90, 290, 190, 210, 120, 220],
        ["2020-05-17", 234, 330, 260, 310, 132, 182],
        ["2020-05-18", 210, 310, 410, 184, 101, 191],
        ["2020-05-12", 120, 220, 150, 320, 134, 332],
        ["2020-05-13", 132, 182, 232, 334, 90, 290],
        ["2020-05-14", 101, 191, 301, 486, 210, 310],
        ["2020-05-15", 134, 332, 154, 390, 120, 220],
        ["2020-05-16", 90, 290, 190, 210, 120, 220],
        ["2020-05-17", 234, 330, 260, 310, 132, 182],
        ["2020-05-12", 120, 220, 150, 320, 134, 332],
        ["2020-05-13", 132, 182, 232, 334, 90, 290],
        ["2020-05-14", 101, 191, 301, 486, 210, 310],
        ["2020-05-15", 134, 332, 154, 390, 120, 220],
        ["2020-05-16", 90, 290, 190, 210, 120, 220],
        ["2020-05-17", 234, 330, 260, 310, 132, 182],
        ["2020-05-18", 210, 310, 410, 184, 101, 191],
        ["2020-05-12", 120, 220, 150, 320, 134, 332],
      ];
      var dateList = data.map(function (item) {
        return item[0];
      });
      var valueList1 = data.map(function (item) {
        return item[1];
      });
      var valueList2 = data.map(function (item) {
        return item[1] - 50;
      });
      var option1 = {
        color: ['#5076df', '#ffcb48'],
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        xAxis: {
          type: 'category',
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisLabel: {
            margin: 20
          },
          axisTick: {
            interval: 0,
            alignWithLabel: true
          },
          data: dateList,
        },
        yAxis: [{
          name: '单位时间疲劳损伤程度',
          type: 'value',
          nameLocation: 'middle',
          nameRotate: 90,
          nameGap: 40,
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisTick: {
            show: false
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: '#4C4B5E',
              type: 'dashed'
            }
          }
        }, {
          name: '累计疲劳损伤程度',
          type: 'value',
          nameLocation: 'middle',
          nameRotate: 90,
          nameGap: 40,
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisTick: {
            show: false
          },
          splitLine: {
            show: false
          }
        }],
        grid: {
          left: 50,
          top: 30,
          right: 50,
          bottom: 17,
          containLabel: true
        },
        series: [{
          name: '单位时间疲劳损伤程度',
          type: 'bar',
          barWidth: 30,
          data: valueList1
        }, {
          name: '累计疲劳损伤程度',
          type: 'line',
          yAxisIndex: 1,
          symbol: 'circle',
          data: valueList2
        }]
      };
      var option2 = {
        color: ['#5076df', '#ffcb48'],
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        xAxis: {
          type: 'category',
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisLabel: {
            margin: 20
          },
          axisTick: {
            interval: 0,
            alignWithLabel: true
          },
          data: dateList,
        },
        yAxis: [{
          name: '单位时间疲劳循环次数',
          type: 'value',
          nameLocation: 'middle',
          nameRotate: 90,
          nameGap: 40,
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisTick: {
            show: false
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: '#4C4B5E',
              type: 'dashed'
            }
          }
        }, {
          name: '累计疲劳循环次数',
          type: 'value',
          nameLocation: 'middle',
          nameRotate: 90,
          nameGap: 40,
          axisLine: {
            lineStyle: {
              color: '#ACB3BE'
            }
          },
          axisTick: {
            show: false
          },
          splitLine: {
            show: false
          }
        }],
        grid: {
          left: 50,
          top: 30,
          right: 50,
          bottom: 17,
          containLabel: true
        },
        series: [{
          name: '单位时间疲劳循环次数',
          type: 'bar',
          barWidth: 30,
          data: valueList1
        }, {
          name: '累计疲劳循环次数',
          type: 'line',
          yAxisIndex: 1,
          symbol: 'circle',
          data: valueList2
        }]
      };
      // 初始化echarts实例
      var myChart1 = echarts.init(document.getElementById('chart1'), 'light');
      myChart1.setOption(option1, true);
      $('.option1').on('click', function(){
        myChart1.setOption(option1, true);
      })
      $('.option2').on('click', function(){
        myChart1.setOption(option2, true);
      })
    }
    //所有检测项和测点   mock
    Mock.mock(
      'GET /monitor-service/items/bridgeId/:5f45d7f634f70b68fbeba992', {
      "data": [{
        "id": "5f5641d7b5185269993253cd",
        "version": 1599636245976,
        "bridgeId": "5f45d7f634f70b68fbeba992",
        "monitorItemType": "STRESS",
        "monitorItemTypeName": "应力",
        "measuringPoints": ["WS-01-FF-03"]
      }]
    }

    );
    //初始化vue
    var app = new Vue({
        el: '#app',
        data: {
          select1name: "",
        },
        mounted() {
          this.getcedian()
        },
        methods: {
          getcedian() {
            let thiz = this;
            axios({
              method: 'get',
              url: "GET /monitor-service/items/bridgeId/:5f45d7f634f70b68fbeba992",
              // params: { bridgeId: "5f45d7f634f70b68fbeba992" }
            })
              .then(function (res) {
                console.log(res)
                if (res.status == 200) {
                  console.log(res.data)
                  //所有检测项和测点
                }

              })
              .catch(err => {

              });
          },

        }
      })
    $('#time-selector1').daterangepicker({
      "startDate": "08/10/2020",
      "endDate": "08/16/2020",
      "opens": "left"
    }, function (start, end, label) {
      console.log(
        "New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')"
        );
    });
  </script>
</body>

</html>
